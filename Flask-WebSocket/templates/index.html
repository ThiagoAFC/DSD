<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard Colaborativo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
    <canvas id="whiteboard" width="800" height="600" style="border:1px solid #000;"></canvas>

    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        var canvas = document.getElementById('whiteboard');
        var context = canvas.getContext('2d');

        var drawing = false;

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mousemove', draw);

        function startDrawing(e) {
            drawing = true;
            draw(e);  // To start drawing from the initial point
        }

        function stopDrawing() {
            drawing = false;
            context.beginPath();  // Reset the drawing path
        }

        function draw(e) {
            if (!drawing) return;

            var x = e.clientX - canvas.getBoundingClientRect().left;
            var y = e.clientY - canvas.getBoundingClientRect().top;

            context.lineWidth = 2;
            context.lineCap = 'round';
            context.strokeStyle = '#000';

            context.lineTo(x, y);
            context.stroke();

            var data = { x: x, y: y };
            socket.emit('draw', data);
        }

        socket.on('draw', function(data) {
            context.lineTo(data.x, data.y);
            context.stroke();
        });
    </script>
</body>
</html>
